# Settings for Backend (on Cloud Run).
# See https://firebase.google.com/docs/app-hosting/configure#cloud-run
runConfig:
  minInstances: 1
  maxInstances: 10
  concurrency: 100
  cpu: 4
  memoryMiB: 2048

# Environment variables and secrets.
env:
  # Configure environment variables.
  # See https://firebase.google.com/docs/app-hosting/configure#user-defined-environment
  - variable: NODE_OPTIONS
    value: '--max-old-space-size=4096'
    # It applies the variable ONLY to the build step
    availability:
      - BUILD
  - variable: NEXT_PUBLIC_FIREBASE_API_KEY
    value: AIzaSyA5hXeWJCfm5bWeE-SuVhda2L0Go8zjuVY
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_AUTH_DOMAIN
    value: lolo-app-staging-1.firebaseapp.com
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_BASE_URL_IDENTITY
    value: https://identitytoolkit.googleapis.com
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_IPINFO_TOKEN
    value: 3672d077f90dad
    availability:
      - BUILD
      - RUNTIME
  # - variable: NEXT_PUBLIC_SENTRY_DSN
  #   secret: frontend-sentry-dsn
  # - variable: GOOGLE_CLIENT_SECRET
  # secret: google-client-secret
  - variable: NEXT_PUBLIC_API_GATEWAY_URL
    value: https://lolo-backend-bvwvl0c6.uc.gateway.dev
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_PROJECT_ID
    value: lolo-app-staging-1
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET
    value: lolo-app-staging-1.NEXT_PUBLIC_firebasestorage.app
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID
    value: 931474023414
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_APP_ID
    value: 1:931474023414:web:e56c4cec287af588d11dd7
    availability:
      - BUILD
      - RUNTIME
  - variable: NEXT_PUBLIC_FIREBASE_MEASUREMENT_ID
    value: G-8QJ6N0VTKZ
    availability:
      - BUILD
      - RUNTIME
routes:
  # Set cache headers for static assets.
  - path: "/_next/static/**"
    cacheControl: "public, max-age=31536000, immutable"
  - path: "/**"
    cacheControl: "public, max-age=0, must-revalidate"
